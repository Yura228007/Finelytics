@page "/"
@rendermode Microsoft.AspNetCore.Components.Web.RenderMode.InteractiveServer
@inject NavigationManager Navigation
@inject HttpClient Http
<link href="app.css" rel="stylesheet" />
<div id="login-page">
    <div class="auth-form-container">
        <h2>???? ? ???????</h2>
            <div class="form-group">
                <label for="login-username">?????:</label>
                <input value="user.Login" type="text" id="login-username" name="username" required>
            </div>
            <div class="form-group">
                <label for="login-password">??????:</label>
                <input value="user.Password" type="password" id="login-password" name="password" required>
            </div>
            <button @onclick="@(() => RedirectToPage("home"))" class="btn-primary">a</button>
        <div class="auth-switch">
            <p>??? ?????????</p>
            <button @onclick="@(() => RedirectToPage("registration"))" class="btn-secondary">??????????????????</button>
        </div>
    </div>
</div>
<h1>@categoriesText</h1>

@code {
    void RedirectToPage(string url)
    {
        Navigation.NavigateTo(url);
    }
    private string categoriesText = "";
    
    protected override async Task OnInitializedAsync()
    {
        await LoadCategoriesAsync();
    }

    private async Task LoadCategoriesAsync()
    {
        var categories = await Http.GetFromJsonAsync<List<Category>>("http://localhost:5169/api/Categories");
        if (categories is not null)
        {
            categoriesText = string.Join(", ", categories.Select(c => c.Name));
        }
    }

}
