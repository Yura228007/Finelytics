@page "/add-category"
@rendermode Microsoft.AspNetCore.Components.Web.RenderMode.InteractiveServer
@inject NavigationManager Navigation
@inject HttpClient Http
<link href="app.css" rel="stylesheet" />

<div id="add-category-page">
    <div class="add-category-container">
        <h2 id="add-category-title">Редактирование категориsи</h2>

            <div class="category-form">
                <div class="form-group">
                    <label class="category-name-label" for="category-name-input">Название категории:</label>
                    <input type="text" id="category-name-input" @bind="category.Name" class="form-control" required />
                </div>
                <div class="form-group"> <label class="category-type-label" for="category-type-select">Тип категории:</label> 
                    <select id="category-type-select" @bind="category.IsIncome" class="form-select"> 
                        <option value="@false">Расход</option> 
                        <option value="@true">Доход</option> 
                    </select>
                    </div>

                <div class="form-group">
                    <label class="category-budget-label" for="category-budget-input">Бюджет:</label>
                    <input type="number" id="category-budget-input" @bind="category.PlannedAmmount" class="form-control" required />
                </div>

                <div class="form-actions">
                    <button class="btn-secondary" @onclick="@(() => Create())">Создать</button>
                <button class="btn-secondary" @onclick="@(() => RedirectToPage($"categories?user_id={Id}&plan_id={PlanId}"))">Отмена</button>
                </div>
            </div>
    </div>
</div>

@code {
    [Parameter]
    [SupplyParameterFromQuery(Name ="user_id")]
    public int Id { get; set; }

    [Parameter]
    [SupplyParameterFromQuery(Name = "plan_id")]
    public int PlanId { get; set; }

    public Category category = new Category();



    private void Create()
    {
        if (category != null)
        {
            CategoriesService.CurrentCategory = category;
            Navigation.NavigateTo($"plan-categories?user_id={Id}&plan_id={PlanId}&action=create");
        }
    }

    void RedirectToPage(string url)
    {
        Navigation.NavigateTo(url);
    }

   
}
