@page "/home"  
@rendermode Microsoft.AspNetCore.Components.Web.RenderMode.InteractiveServer
@inject NavigationManager Navigation
<link href="app.css" rel="stylesheet" />
<div id="main-page">
    <header class="main-header">
        <!-- Группируем название сайта и кнопку -->
        <div class="left-header-group">
            <div class="site-title">Планировщик расходов</div>
            <button @onclick="@(() => RedirectToPage("create-plan"))" id="create-plan-btn" class="btn-primary switch-page-link">Создать план</button>
        </div>

        <div class="user-profile">
            <span class="username">Пользователь</span>
            <span class="user-icon">👤</span>
        </div>
    </header>

    <main class="dashboard-content">
        <h2>Ваши планы</h2>
        <div class="plans-table-container">
            <table id="plans-table">
                <thead>
                    <tr>
                        <th>Название плана</th>
                        <th>Срок</th>
                        <th>Статус</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="plan-row" data-plan-id="1">
                        <td class="plan-title">Месяц на еду</td>
                        <td class="plan-date-range">01.11.2023 - 30.11.2023</td>
                        <td class="plan-status">Активен</td>
                        <td class="plan-actions">
                            <button @onclick="@(() => RedirectToPage("edit-plan"))" class="btn-edit" data-plan-id="1">Редактировать</button>
                            <button @onclick="@(() => RedirectToPage("plan-info"))" class="btn-details" data-plan-id="1">Подробнее</button>
                            <button @onclick="@(() => RedirectToPage("home"))" class="btn-close-plan" data-plan-id="1">Закрыть план</button>
                            <button @onclick="@(() => RedirectToPage("analythics"))" class="btn-analyze hidden" data-plan-id="1">Проанализировать</button>
                        </td>
                    </tr>
                    <!-- Еще один пример -->
                    <tr class="plan-row" data-plan-id="2">
                        <td class="plan-title">Отпуск 2024</td>
                        <td class="plan-date-range">01.07.2024 - 15.07.2024</td>
                        <td class="plan-status">Активен</td>
                        <td class="plan-actions">
                            <button @onclick="@(() => RedirectToPage("edit-plan"))" class="btn-edit" data-plan-id="2">Редактировать</button>
                            <button @onclick="@(() => RedirectToPage("plan-info"))" class="btn-details" data-plan-id="2">Подробнее</button>
                            <button @onclick="@(() => RedirectToPage("home"))" class="btn-close-plan" data-plan-id="2">Закрыть план</button>
                            <button @onclick="@(() => RedirectToPage("analythics"))" class="btn-analyze hidden" data-plan-id="2">Проанализировать</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>
</div>

@code {
    [Parameter]
    [SupplyParameterFromQuery(Name="id")]
    public int Id {get; set;} = -1
    void RedirectToPage(string url)
    {
        Navigation.NavigateTo(url);
    }
}
